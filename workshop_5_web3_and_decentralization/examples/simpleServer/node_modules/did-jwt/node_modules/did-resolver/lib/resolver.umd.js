!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.didResolver={})}(this,function(e){function r(){var e=new Map;return function(r,t){try{var n=!1;function i(i){if(n)return i;var o=e.get(r.did);return void 0!==o?o:Promise.resolve(t()).then(function(t){return e.set(r.did,t),t})}var o=function(){if(r.params&&"true"===r.params["no-cache"])return n=!0,Promise.resolve(t())}();return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(e){return Promise.reject(e)}}}function t(e,r){return r()}var n=new RegExp("^did:([a-zA-Z0-9_]+):([a-zA-Z0-9_.-]+(:[a-zA-Z0-9_.-]+)*)((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$");function i(e){if(""===e||!e)throw new Error("Missing DID");var r=e.match(n);if(r){var t={did:"did:"+r[1]+":"+r[2],method:r[1],id:r[2],didUrl:e};if(r[4]){var i=r[4].slice(1).split(";");t.params={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o].split("=");t.params[s[0]]=s[1]}}return r[6]&&(t.path=r[6]),r[7]&&(t.query=r[7].slice(1)),r[8]&&(t.fragment=r[8].slice(1)),t}throw new Error("Invalid DID "+e)}var o=function(e,n){void 0===e&&(e={}),this.registry=e,this.cache=!0===n?r():n||t};o.prototype.resolve=function(e){var r=this;try{var t=i(e),n=this.registry[t.method];return n?this.cache(t,function(){return n(t.did,t,r)}):Promise.reject(new Error("Unsupported DID method: '"+t.method+"'"))}catch(e){return Promise.reject(e)}},e.inMemoryCache=r,e.noCache=t,e.parse=i,e.Resolver=o});
//# sourceMappingURL=resolver.umd.js.map
