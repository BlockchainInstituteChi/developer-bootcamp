function r(){var r=new Map;return function(e,t){try{var n=!1;function i(i){if(n)return i;var o=r.get(e.did);return void 0!==o?o:Promise.resolve(t()).then(function(t){return r.set(e.did,t),t})}var o=function(){if(e.params&&"true"===e.params["no-cache"])return n=!0,Promise.resolve(t())}();return Promise.resolve(o&&o.then?o.then(i):i(o))}catch(r){return Promise.reject(r)}}}function e(r,e){return e()}var t=new RegExp("^did:([a-zA-Z0-9_]+):([a-zA-Z0-9_.-]+(:[a-zA-Z0-9_.-]+)*)((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$");function n(r){if(""===r||!r)throw new Error("Missing DID");var e=r.match(t);if(e){var n={did:"did:"+e[1]+":"+e[2],method:e[1],id:e[2],didUrl:r};if(e[4]){var i=e[4].slice(1).split(";");n.params={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o].split("=");n.params[s[0]]=s[1]}}return e[6]&&(n.path=e[6]),e[7]&&(n.query=e[7].slice(1)),e[8]&&(n.fragment=e[8].slice(1)),n}throw new Error("Invalid DID "+r)}var i=function(t,n){void 0===t&&(t={}),this.registry=t,this.cache=!0===n?r():n||e};i.prototype.resolve=function(r){var e=this;try{var t=n(r),i=this.registry[t.method];return i?this.cache(t,function(){return i(t.did,t,e)}):Promise.reject(new Error("Unsupported DID method: '"+t.method+"'"))}catch(r){return Promise.reject(r)}},exports.inMemoryCache=r,exports.noCache=e,exports.parse=n,exports.Resolver=i;
//# sourceMappingURL=resolver.js.map
